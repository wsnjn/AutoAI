### æ™ºèƒ½ç”Ÿæˆã€éƒ¨ç½²ä¸å®æ—¶é¢„è§ˆä¸€ä½“åŒ–äº‘å¼€å‘å¹³å°

---

## å‰è¨€

åœ¨ä¸­å›½ AI åº”ç”¨ç”Ÿæ€ä¸­ï¼Œä¸ªäººå¼€å‘è€…èƒ½å¤Ÿè½»æ¾â€œä½¿ç”¨â€å¤§æ¨¡å‹ï¼ˆä¾‹å¦‚è°ƒç”¨ DeepSeek APIã€ChatGPTã€é€šä¹‰åƒé—®æ¥å£ï¼‰ï¼Œ

ä½†å‡ ä¹æ²¡æœ‰ç³»ç»ŸåŒ–çš„èµ„æ–™æ•™äººå¦‚ä½•**ä»é›¶å®ç°ä¸€ä¸ª AI é©±åŠ¨çš„å¼€å‘å·¥å…·**ã€‚

AutoAI é¡¹ç›®çš„åˆè¡·ï¼Œå°±æ˜¯æƒ³å›ç­”ä¸€ä¸ªé—®é¢˜ï¼š

> â€œä¸€ä¸ªäººï¼Œèƒ½å¦ä»é›¶å®ç°ä¸€æ¬¾ç±»ä¼¼ Cursor / Replit çš„ AI æ™ºèƒ½äº‘å¼€å‘å¹³å°ï¼Ÿâ€
> 

æˆ‘å†³å®šäº²è‡ªæ„å»ºä¸€ä¸ªå¯è¿è¡Œã€å¯è§†åŒ–ã€å¯äº¤äº’çš„ AI äº‘ç«¯å¼€å‘ç³»ç»Ÿâ€”â€”

è®© AI èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆã€ä¿®æ”¹ã€éƒ¨ç½²å®Œæ•´çš„å‰åç«¯é¡¹ç›®ã€‚

å®ƒä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯ä¸€æ¬¡ç³»ç»Ÿæ€§æ¢ç´¢ï¼š

ä» **æ¶æ„è®¾è®¡ â†’ æ–‡ä»¶ç³»ç»Ÿè™šæ‹ŸåŒ– â†’ å®æ—¶æ¸²æŸ“ä¸ AI åä½œ** çš„å…¨è¿‡ç¨‹ã€‚

---

## ç¬¬ä¸€ç« ï¼šé¡¹ç›®æ„æ€ä¸ç†å¿µ

### 1.1 èƒŒæ™¯

ä¼ ç»Ÿçš„ AI é¡¹ç›®ä»…ä»…åœç•™åœ¨ã€Œé—®ç­”å±‚ã€ï¼š

ç”¨æˆ·è¾“å…¥é—®é¢˜ï¼Œæ¨¡å‹è¾“å‡ºç­”æ¡ˆã€‚

è€Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯**è®© AI ç›´æ¥æ“ä½œé¡¹ç›®æ–‡ä»¶ã€ä¿®æ”¹ä»£ç ã€éƒ¨ç½²é¡¹ç›®**ã€‚

å› æ­¤ï¼Œæˆ‘æƒ³å®ç°ä¸€ä¸ªç³»ç»Ÿï¼Œå®ƒèƒ½åšåˆ°ï¼š

- ç†è§£è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼›
- è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ã€ç¼–å†™ä»£ç ï¼›
- å³æ—¶åœ¨ç½‘é¡µä¸­å¯è§†åŒ–é¢„è§ˆï¼›
- æ”¯æŒå®æ—¶åä½œä¸é¡¹ç›®ä¿å­˜ã€‚

è¿™å°±æ˜¯ **AutoAI Cloud Dev** çš„åˆè¡·ï¼š

> ç”¨ AI è‡ªåŠ¨åŒ–æ•´ä¸ªè½¯ä»¶å¼€å‘è¿‡ç¨‹ã€‚
> 

---

## ç¬¬äºŒç« ï¼šæ€»ä½“æ¶æ„è®¾è®¡

AutoAI çš„æ•´ä½“è®¾è®¡éµå¾ªã€Œä¸‰å±‚åˆ†ç¦» + æ•°æ®é©±åŠ¨ã€çš„æ¶æ„åŸåˆ™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 å‰ç«¯å±‚ï¼ˆVue 3ï¼‰            â”‚
â”‚  æ–‡ä»¶ç®¡ç† Â· å®æ—¶é¢„è§ˆ Â· AI èŠå¤© Â· å¯è§†åŒ–   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ API è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 åç«¯å±‚ï¼ˆNode.js + Expressï¼‰â”‚
â”‚  AIæŒ‡ä»¤è°ƒåº¦ Â· æ–‡ä»¶ç³»ç»Ÿæ§åˆ¶ Â· è·¯ç”±æœåŠ¡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ SQL æ˜ å°„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 æ•°æ®å±‚ï¼ˆMySQLï¼‰           â”‚
â”‚  åŠ¨æ€è¡¨ç»“æ„ Â· è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ Â· é¡¹ç›®éš”ç¦»     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ç¬¬ä¸‰ç« ï¼šç³»ç»Ÿæ¶æ„æ¼”è¿›

### ä»ã€Œæ“ä½œæœ¬åœ°æ–‡ä»¶ã€åˆ°ã€Œäº‘ç«¯è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€

åœ¨æœ€åˆç‰ˆæœ¬ï¼ˆv0.1ï¼‰ä¸­ï¼Œæˆ‘å°è¯•è®© AI ç›´æ¥è°ƒç”¨ Node.js çš„ `fs` æ¨¡å—æ“ä½œæœ¬åœ°æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š

```jsx
fs.writeFileSync('./src/App.vue', content)

```

ä½†è¿™å¾ˆå¿«é‡åˆ°äº†ç“¶é¢ˆï¼š

- æµè§ˆå™¨ç«¯æ— æ³•è®¿é—®æœ¬åœ°ç£ç›˜ï¼›
- äº‘ç«¯éƒ¨ç½²æ—¶æƒé™å—é™ï¼›
- å¤šç”¨æˆ·åä½œå®Œå…¨ä¸å¯è¡Œï¼›
- æ–‡ä»¶åˆ é™¤/å›æ»šæ— å®‰å…¨ä¿éšœã€‚

äºæ˜¯æˆ‘æ„è¯†åˆ°ï¼š

**å¿…é¡»è®©â€œæ–‡ä»¶ç³»ç»Ÿâ€å­˜åœ¨äºæ•°æ®åº“ä¸­ã€‚**

æ¢å¥è¯è¯´ï¼š

> è®© MySQL æˆä¸ºè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆDBFSï¼‰ã€‚
> 

è¿™æ—¶çš„æ ¸å¿ƒè½¬å˜æ˜¯ï¼š

- æ–‡ä»¶ = ä¸€æ¡æ•°æ®åº“è®°å½•
- æ–‡ä»¶å¤¹ = ä¸€å¼ æ•°æ®åº“è¡¨
- æ–‡ä»¶å†…å®¹ = `content` å­—æ®µ
- ç›®å½•å±‚çº§ = è¡¨ååµŒå¥—ç»“æ„

ä¾‹å¦‚ï¼š

```
project_autoai_cloud_dev
project_autoai_cloud_dev__src
project_autoai_cloud_dev__src__components

```

è¿™æ ·ï¼ŒAI åªéœ€æ“ä½œæ•°æ®åº“ï¼Œå°±èƒ½â€œé—´æ¥â€å®Œæˆæ‰€æœ‰æ–‡ä»¶æ“ä½œï¼Œ

åŒ…æ‹¬åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€é‡å‘½åã€å›æ»šç­‰ã€‚

---

## ç¬¬å››ç« ï¼šåç«¯å®ç°è¿‡ç¨‹ï¼ˆNode.jsï¼‰

### 4.1 é¡¹ç›®å…¥å£ï¼š`backend/index.js`

è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ä¸­æ¢ã€‚

è´Ÿè´£ï¼š

- åˆå§‹åŒ–æ•°æ®åº“ï¼›
- å®šä¹‰ API æ¥å£ï¼›
- å¯åŠ¨ Express æœåŠ¡å™¨ï¼›
- å¤„ç†æ–‡ä»¶é¢„è§ˆè¯·æ±‚ï¼›
- æ¥å…¥ AI è°ƒåº¦æ¨¡å—ã€‚

æ ¸å¿ƒé€»è¾‘ï¼š

```jsx
import express from 'express';
import { projectService } from './services/projectService.js';

const app = express();
app.use(express.json());

// é¡¹ç›®æ–‡ä»¶è¯»å–æ¥å£
app.get('/api/projects/:id/files', async (req, res) => {
  const files = await projectService.getProjectStructure(req.params.id);
  res.json(files);
});

// æ–‡ä»¶é¢„è§ˆ
app.get('/api/projects/:projectId/preview', async (req, res) => {
  const { filePath } = req.query;
  const content = await projectService.getFileContent(req.params.projectId, filePath);
  res.setHeader('Content-Type', 'text/html; charset=utf-8');
  res.send(content);
});

```

è¿™é‡Œæœ€å…³é”®çš„éƒ¨åˆ†æ˜¯ï¼š

æ‰€æœ‰ä¸â€œæ–‡ä»¶â€ç›¸å…³çš„è¡Œä¸ºéƒ½è¢« projectService.js æ¥ç®¡ã€‚

åç«¯åªæ˜¯ä½œä¸ºâ€œè°ƒåº¦å‘˜â€ï¼Œè´Ÿè´£è¯·æ±‚è·¯ç”±ä¸æƒé™éªŒè¯ã€‚

---

## ç¬¬äº”ç« ï¼šæ ¸å¿ƒæœåŠ¡å±‚ï¼ˆprojectService.jsï¼‰

è¿™ä¸€å±‚æ˜¯ AutoAI çš„çµé­‚ã€‚

å®ƒæŠŠâ€œæ–‡ä»¶ç³»ç»Ÿâ€çš„æ‰€æœ‰è¡Œä¸ºæŠ½è±¡ä¸ºæ•°æ®åº“æ“ä½œã€‚

ä¸»è¦èŒè´£ï¼š

| æ¨¡å— | åŠŸèƒ½ |
| --- | --- |
| åŠ¨æ€è¡¨ç®¡ç† | æ ¹æ®é¡¹ç›®åç”Ÿæˆå¯¹åº”è¡¨ç»“æ„ |
| æ–‡ä»¶/æ–‡ä»¶å¤¹ CRUD | ä»¥æ•°æ®åº“è®°å½•è¡¨ç¤ºæ–‡ä»¶ |
| è½¯åˆ é™¤æœºåˆ¶ | æ–‡ä»¶åˆ é™¤æ ‡è®°ä¸º `deleted` çŠ¶æ€ |
| è¡¨é—´é€’å½’ | æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹æ˜ å°„åˆ°å­è¡¨ |
| å®‰å…¨æ€§æ§åˆ¶ | è¡¨åè¿‡æ»¤ã€é˜²æ³¨å…¥å¤„ç† |

ç¤ºä¾‹æ ¸å¿ƒå‡½æ•°ğŸ‘‡

### ğŸ§© è¡¨åç”Ÿæˆå™¨

```jsx
generateSafeTableName(projectName) {
  let safe = projectName.replace(/[^a-zA-Z0-9_]/g, '_');
  if (!/^[a-zA-Z]/.test(safe)) safe = 'project_' + safe;
  return safe.substring(0, 60).toLowerCase();
}

```

### ğŸ“ æ–‡ä»¶ä¿å­˜é€»è¾‘

```jsx
async saveItemToFolderTable(projectId, folderTableName, itemData) {
  const [existing] = await pool.execute(`SHOW TABLES LIKE '${folderTableName}'`);
  if (!existing.length) await this.createFolderDataTable(projectId, folderTableName);

  await pool.execute(`INSERT INTO \`${folderTableName}\`
      (file_name, item_type, content, parent_path)
      VALUES (?, ?, ?, ?)`,
      [itemData.file_name, itemData.item_type, itemData.content, itemData.parent_path]);
}

```

### ğŸ—‘ï¸ æ–‡ä»¶è½¯åˆ é™¤æœºåˆ¶

```jsx
async deleteFile(projectId, fileName, filePath) {
  const deletedPath = `${filePath}-deleted-${Date.now()}`;
  await pool.execute(
    `UPDATE \`${safeTableName}\`
     SET status = 'deleted', file_path = ?
     WHERE file_name = ? AND file_path = ?`,
     [deletedPath, fileName, filePath]
  );
}

```

---

## ç¬¬å…­ç« ï¼šå‰ç«¯å®ç°ï¼ˆVue 3ï¼‰

å‰ç«¯ä»¥ä¸‰åˆ—å¸ƒå±€ä¸ºä¸»ï¼š

```
å·¦ä¾§ï¼šæ–‡ä»¶æ ‘ï¼ˆFileTreeDisplayï¼‰
ä¸­é—´ï¼šå®æ—¶é¢„è§ˆï¼ˆProjectPreviewï¼‰
å³ä¾§ï¼šAI åŠ©æ‰‹ï¼ˆAIChatBoxï¼‰

```

æ¯ä¸ªéƒ¨åˆ†å‡ä»¥ç»„ä»¶åŒ–æ–¹å¼ç‹¬ç«‹è¿è¡Œï¼Œé€šè¿‡ `props` ä¸äº‹ä»¶é€šä¿¡å®ç°è”åŠ¨ã€‚

ä¾‹å¦‚ï¼š

- ç‚¹å‡»æ–‡ä»¶ â†’ `@file-selected` â†’ é¢„è§ˆç»„ä»¶åˆ·æ–°å†…å®¹ï¼›
- AI åˆ›å»ºæ–‡ä»¶ â†’ `@file-created` â†’ æ–‡ä»¶æ ‘å®æ—¶æ›´æ–°ï¼›
- ç”¨æˆ·ç¼–è¾‘ä»£ç  â†’ `v-model` åŒæ­¥æ•°æ®åº“å†…å®¹ã€‚

# ğŸ§© ç¬¬å…«ç« ï¼šé€æ–‡ä»¶åŠŸèƒ½è¯´æ˜ï¼ˆå…¨é¡¹ç›®æ–‡ä»¶è§£æ„åˆ†æï¼‰

---

## ğŸ“ ä¸€ã€åç«¯æ ¸å¿ƒç›®å½•ç»“æ„

```
backend/
â”œâ”€â”€ index.js                     # æœåŠ¡å…¥å£ä¸è·¯ç”±æ³¨å†Œ
â”œâ”€â”€ config/
â”‚   â””â”€â”€ database.js              # æ•°æ®åº“è¿æ¥ä¸åˆå§‹åŒ–
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ aiService.js             # AI æŒ‡ä»¤è§£æä¸æ‰§è¡Œ
â”‚   â”œâ”€â”€ projectService.js        # è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸æ•°æ®åº“ç®¡ç†æ ¸å¿ƒ
â”‚   â””â”€â”€ userService.js           # ç”¨æˆ·ä¸é¡¹ç›®æƒé™æœåŠ¡
â””â”€â”€ utils/
    â””â”€â”€ fileUtils.js             # æ–‡ä»¶è·¯å¾„ä¸å†…å®¹æ ¼å¼åŒ–å·¥å…·

```

---

## 1ï¸âƒ£ `backend/index.js` â€” ç³»ç»Ÿä¸»æ§ä¸­æ¢

### ğŸ“˜ åŠŸèƒ½æ¦‚è¿°

è´Ÿè´£æ•´ä¸ªåç«¯æœåŠ¡çš„å…¥å£åˆå§‹åŒ–ä¸æ¥å£åˆ†å‘ï¼Œæ˜¯é€»è¾‘å±‚ä¸å±•ç¤ºå±‚ä¹‹é—´çš„æ¡¥æ¢ã€‚

æ‰€æœ‰æ¥è‡ªå‰ç«¯ï¼ˆVueï¼‰çš„è¯·æ±‚ï¼Œéƒ½å…ˆç»è¿‡è¿™é‡Œï¼Œå†åˆ†å‘åˆ°ç›¸åº”çš„ service å±‚ã€‚

### âš™ï¸ ä¸»è¦æ¨¡å—

| æ¨¡å— | åŠŸèƒ½ |
| --- | --- |
| Express åˆå§‹åŒ– | å¯åŠ¨ Web æœåŠ¡ï¼Œæ³¨å†Œä¸­é—´ä»¶ |
| è·¯ç”±æ³¨å†Œ | /api/aiã€/api/projectsã€/api/users ç­‰æ¥å£å…¥å£ |
| é¢„è§ˆå¤„ç† | åŠ¨æ€æ¸²æŸ“ HTML / Vue æ–‡ä»¶å®æ—¶é¢„è§ˆ |
| é”™è¯¯æ•è· | æ•è·å¹¶ç»Ÿä¸€è¿”å› API é”™è¯¯å“åº” |

### ğŸ”© æ ¸å¿ƒä»£ç æ®µ

```jsx
// AI èŠå¤© + æ–‡ä»¶ç”Ÿæˆæ¥å£
app.post('/api/ai/chat', async (req, res) => {
  const { message, projectId, projectName, context } = req.body;

  const project = await projectService.getProject(projectId);
  const result = await aiService.processChat(message, projectId, projectName, context);

  if (result.actions?.length) {
    for (const action of result.actions) {
      await aiService.executeCodeModification(action, projectId, projectName);
    }
  }
  res.json({ success: true, data: result });
});

```

### ğŸ’¡ è®¾è®¡æ€è·¯

- ä½¿ç”¨ `async/await` è¿›è¡Œå¼‚æ­¥ä»»åŠ¡ç¼–æ’ï¼Œé¿å…é˜»å¡ã€‚
- å°†æ‰€æœ‰å¤æ‚é€»è¾‘ï¼ˆæ–‡ä»¶å†™å…¥ã€AI è¯·æ±‚ï¼‰æŠ½ç¦»è‡³ `services/` å±‚ï¼Œä¿æŒå…¥å£ç®€æ´ã€‚
- å¢åŠ ç»Ÿä¸€çš„è·¨åŸŸå¤„ç†ï¼ˆ`app.use(cors())`ï¼‰ï¼Œæ”¯æŒå‰åç«¯åˆ†ç¦»éƒ¨ç½²ã€‚

---

## 2ï¸âƒ£ `backend/config/database.js` â€” æ•°æ®å¼•æ“æ ¸å¿ƒ

### ğŸ“˜ åŠŸèƒ½æ¦‚è¿°

è´Ÿè´£ MySQL æ•°æ®åº“è¿æ¥æ± ç®¡ç†ã€åŠ¨æ€è¡¨åˆå§‹åŒ–ä¸ç³»ç»Ÿè¡¨åˆ›å»ºã€‚

æ˜¯æ•´ä¸ªâ€œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿâ€çš„åº•å±‚é©±åŠ¨ã€‚

### âš™ï¸ æ ¸å¿ƒé€»è¾‘

```jsx
const pool = mysql.createPool({
  host: '39.108.142.250',
  user: 'wslop',
  password: '345345',
  database: 'autoai',
  connectionLimit: 10,
  charset: 'utf8mb4'
});

async function initDatabase() {
  await pool.execute(createProjectTable);
  await pool.execute(createLogTable);
  await pool.execute(createAIConversationTable);
}

```

### ğŸ’¡ è®¾è®¡æ€è·¯

- é‡‡ç”¨ **è¿æ¥æ± ï¼ˆPoolï¼‰** ä¼˜åŒ–å¤šç”¨æˆ·å¹¶å‘ã€‚
- åˆå§‹åŒ–è‡ªåŠ¨åˆ›å»ºå¿…è¦è¡¨ç»“æ„ï¼Œæ”¯æŒç³»ç»Ÿçº§æ¢å¤ã€‚
- æ‰€æœ‰é¡¹ç›®è¡¨åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºï¼Œæå‡é¡¹ç›®éš”ç¦»æ€§ã€‚

---

## 3ï¸âƒ£ `backend/services/projectService.js` â€” æ•°æ®ä¸æ–‡ä»¶åŒæ –æ¨¡å—

### ğŸ“˜ åŠŸèƒ½æ¦‚è¿°

è¿™æ˜¯æ•´ä¸ª AutoAI æœ€æ ¸å¿ƒçš„æ¨¡å—ã€‚

å®ƒå°†æ•°æ®åº“è¡¨ç»“æ„æŠ½è±¡æˆæ–‡ä»¶ç³»ç»Ÿï¼Œè®©â€œé¡¹ç›®æ–‡ä»¶å¤¹â€åœ¨ MySQL ä¸­å­˜åœ¨ã€‚

### ğŸ§± æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

| æ¨¡å— | åŠŸèƒ½è¯´æ˜ |
| --- | --- |
| è¡¨åç”Ÿæˆå™¨ | æ ¹æ®é¡¹ç›®åç”Ÿæˆå®‰å…¨è¡¨å |
| åŠ¨æ€è¡¨ç®¡ç†å™¨ | è‡ªåŠ¨åˆ›å»º/åˆ é™¤é¡¹ç›®è¡¨ |
| æ–‡ä»¶ CRUD | ä»¥ SQL æ–¹å¼å®ç°æ–‡ä»¶å¢åˆ æ”¹æŸ¥ |
| è™šæ‹Ÿè·¯å¾„è§£æ | å°†è·¯å¾„æ˜ å°„ä¸ºè¡¨å±‚çº§ç»“æ„ |
| å›æ»šæœºåˆ¶ | åˆ é™¤æ–‡ä»¶æ—¶ä¿ç•™å‰¯æœ¬ |
| æ¸…ç†æœåŠ¡ | å®šæœŸåˆ é™¤ `deleted` çŠ¶æ€æ–‡ä»¶ |

### ğŸ”© æ ¸å¿ƒä»£ç ç¤ºä¾‹

### âœ… è¡¨åç”Ÿæˆ

```jsx
generateSafeTableName(name) {
  let safe = name.replace(/[^a-zA-Z0-9_]/g, '_');
  if (!/^[a-zA-Z]/.test(safe)) safe = 'project_' + safe;
  return safe.slice(0, 60).toLowerCase();
}

```

### ğŸ“ æ–‡ä»¶ä¿å­˜

```jsx
async saveItemToFolderTable(projectId, folderTableName, itemData) {
  const [exist] = await pool.execute(`SHOW TABLES LIKE '${folderTableName}'`);
  if (!exist.length) await this.createFolderDataTable(projectId, folderTableName);

  await pool.execute(
    `INSERT INTO \`${folderTableName}\`
      (file_name, item_type, content, parent_path)
     VALUES (?, ?, ?, ?)`,
    [itemData.file_name, itemData.item_type, itemData.content, itemData.parent_path]
  );
}

```

### ğŸ—‘ï¸ è½¯åˆ é™¤æœºåˆ¶

```jsx
async deleteFile(projectId, fileName, filePath) {
  const deletedPath = `${filePath}-deleted-${Date.now()}`;
  await pool.execute(
    `UPDATE \`${safeTableName}\`
     SET status='deleted', file_path=?
     WHERE file_name=? AND file_path=?`,
    [deletedPath, fileName, filePath]
  );
}

```

### ğŸ’¡ è®¾è®¡äº®ç‚¹

- **æ–‡ä»¶å¤¹å³è¡¨ç»“æ„**ï¼šæ¯ä¸ªæ–‡ä»¶å¤¹è‡ªåŠ¨æ˜ å°„ä¸ºä¸€å¼ è¡¨ï¼›
- **è½¯åˆ é™¤æœºåˆ¶**ï¼šä¿è¯å”¯ä¸€çº¦æŸä¸å¯å›æ»šæ€§ï¼›
- **å±‚çº§å­˜å‚¨**ï¼šæ·±å±‚è·¯å¾„é€’å½’æ˜ å°„ï¼›
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå»ºç«‹å¤åˆç´¢å¼•ä¸å»¶è¿Ÿæ¸…ç†ä»»åŠ¡ã€‚

---

## 4ï¸âƒ£ `backend/services/aiService.js` â€” AI æ™ºèƒ½ç¼–æ’å±‚

### ğŸ“˜ åŠŸèƒ½æ¦‚è¿°

è´Ÿè´£è§£æç”¨æˆ·è‡ªç„¶è¯­è¨€è¯·æ±‚ã€æ„å»ºæç¤ºè¯ã€è°ƒç”¨ DeepSeek APIã€è§£æç»“æœå¹¶æ‰§è¡Œæ–‡ä»¶æ“ä½œã€‚

### ğŸ”© æ ¸å¿ƒæµç¨‹

```jsx
async processChat(userInput, projectId, projectName, context) {
  await projectService.cleanupDeletedFiles(projectId, projectName);

  const prompt = this.buildSystemPrompt(projectId, projectName);
  const aiResponse = await this.callDeepSeekAPI(prompt, userInput);
  const actions = this.parseAIResponse(aiResponse);

  for (const action of actions) {
    await this.executeCodeModification(action, projectId, projectName);
  }

  return { response: aiResponse, actions };
}

```

### ğŸ’¡ åˆ›æ–°ç‚¹

- å°† AI å“åº”è§£æä¸º â€œæ“ä½œæŒ‡ä»¤å¯¹è±¡â€
    
    ```jsx
    { type: 'create_file', description: 'æ–°å»º App.vue', code: '...' }
    
    ```
    
- é€šè¿‡å‘½ä»¤æ¨¡å¼æ‰§è¡Œï¼Œå®ç°è§£è€¦ä¸å¯è¿½è¸ªæ€§ï¼›
- æ”¯æŒå¤šåŠ¨ä½œç»„åˆæ‰§è¡Œï¼Œé…åˆå›æ»šæœºåˆ¶é˜²æ­¢æŸåé¡¹ç›®ç»“æ„ã€‚

---

## 5ï¸âƒ£ `frontend/src/views/MainApp.vue` â€” å‰ç«¯ä¸»ç•Œé¢

### ğŸ“˜ åŠŸèƒ½æ¦‚è¿°

æ•´ä¸ª AutoAI å‰ç«¯çš„ä¸­æ§é¡µé¢ï¼Œ

é‡‡ç”¨ä¸‰æ å¸ƒå±€ + å“åº”å¼è®¾è®¡ï¼Œæ•´åˆ AI åŠ©æ‰‹ã€æ–‡ä»¶æ ‘ä¸å®æ—¶é¢„è§ˆã€‚

### âš™ï¸ å¸ƒå±€ç»“æ„

```
å·¦ï¼šFileTreeDisplay.vue
ä¸­ï¼šProjectPreview.vue
å³ï¼šAIChatBox.vue

```

### ğŸ”© æ ¸å¿ƒé€»è¾‘

```
<FileTreeDisplay @file-selected="onFileSelected" />
<ProjectPreview :selected-file="selectedFile" />
<AIChatBox @file-created="refreshFiles" />

```

### ğŸ’¡ ç‰¹ç‚¹

- åŒå‘äº‹ä»¶é€šä¿¡ï¼›
- æ–‡ä»¶ã€é¢„è§ˆã€AI ä¸‰è€…å®æ—¶åŒæ­¥ï¼›
- Vue 3 Composition API å®ç°æ¨¡å—åŒ–é€»è¾‘ã€‚

---

## 6ï¸âƒ£ `frontend/src/components/ProjectPreview.vue` â€” å®æ—¶é¢„è§ˆæ ¸å¿ƒ

### ğŸ“˜ åŠŸèƒ½æ¦‚è¿°

è´Ÿè´£ HTML/Vue æ–‡ä»¶çš„åŠ¨æ€æ¸²æŸ“ã€‚

æ”¯æŒ iframe å®æ—¶é¢„è§ˆä¸ä»£ç ç¼–è¾‘ä¿å­˜ã€‚

### ğŸ”© æ ¸å¿ƒé€»è¾‘

```
<iframe :src="previewUrl" class="preview-frame" />
<textarea v-model="codeContent"></textarea>
<button @click="saveCode">ğŸ’¾ ä¿å­˜</button>

```

### ğŸ’¡ ç‰¹ç‚¹

- æ”¯æŒåŒæ¨¡å¼ï¼ˆé¢„è§ˆ / ç¼–è¾‘ï¼‰åˆ‡æ¢ï¼›
- è‡ªåŠ¨æ„å»ºæ–‡ä»¶ API URLï¼›
- é”™è¯¯çŠ¶æ€ä¸åŠ è½½åŠ¨ç”»å¤„ç†å®Œå–„ï¼›
- å®æ—¶åˆ·æ–°ä¸é‡è½½å…¨é¡µã€‚

---

## 7ï¸âƒ£ `frontend/src/components/AIChatBox.vue` â€” AI èŠå¤©ä¸ä»»åŠ¡è§¦å‘ä¸­å¿ƒ

### ğŸ“˜ åŠŸèƒ½æ¦‚è¿°

å®ç°ä¸ AI çš„å®æ—¶äº¤äº’ï¼ŒåŒ…æ‹¬è‡ªç„¶è¯­è¨€è¾“å…¥ã€æ¶ˆæ¯åˆ—è¡¨æ¸²æŸ“ä¸ä»»åŠ¡è§¦å‘ã€‚

### ğŸ”© æ ¸å¿ƒé€»è¾‘

```jsx
async sendMessage() {
  const response = await axios.post('/api/ai/chat', { message, projectId });
  messages.push({ role: 'assistant', content: response.data });
}

```

### ğŸ’¡ è®¾è®¡äº®ç‚¹

- æ¶ˆæ¯æ¸²æŸ“é‡‡ç”¨é€’å½’åˆ—è¡¨ï¼›
- çŠ¶æ€æç¤ºï¼ˆæ­£åœ¨è¾“å…¥...ï¼‰ï¼›
- AI å“åº”è§£æä¸ºæ“ä½œæŒ‰é’®ï¼Œå¯ç›´æ¥åº”ç”¨ä¿®æ”¹ã€‚
