# AutoAI é¡¹ç›®å¼€å‘æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

AutoAI æ˜¯ä¸€ä¸ªåŸºäº Vue.js + Node.js + MySQL çš„æ™ºèƒ½ä»£ç åŠ©æ‰‹é¡¹ç›®ï¼Œé›†æˆäº† DeepSeek AI æ¥æä¾›ä»£ç ä¿®æ”¹å»ºè®®å’Œè‡ªåŠ¨åŒ–æ“ä½œã€‚é¡¹ç›®é‡‡ç”¨äº‘å¼€å‘æ¨¡å¼ï¼Œæ”¯æŒå¤šç”¨æˆ·åä½œå¼€å‘ã€‚

## ğŸ¯ é¡¹ç›®ç›®æ ‡

1. **æ™ºèƒ½ä»£ç åŠ©æ‰‹**: é›†æˆ AI è¿›è¡Œä»£ç åˆ†æå’Œä¿®æ”¹å»ºè®®
2. **äº‘å¼€å‘ç¯å¢ƒ**: æ”¯æŒåœ¨çº¿é¡¹ç›®åˆ›å»ºå’Œåä½œ
3. **æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ**: è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒæ–‡ä»¶/æ–‡ä»¶å¤¹çš„ CRUD æ“ä½œ
4. **å®æ—¶ç›‘æ§**: é¡¹ç›®å˜æ›´æ—¥å¿—å’Œæ“ä½œè®°å½•
5. **å¤šç”¨æˆ·åä½œ**: é€šè¿‡é¡¹ç›® ID å®ç°å›¢é˜Ÿåä½œ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue.js 3
- **è·¯ç”±**: Vue Router 4
- **UI**: åŸç”Ÿ CSS + å“åº”å¼è®¾è®¡
- **çŠ¶æ€ç®¡ç†**: localStorage
- **HTTP å®¢æˆ·ç«¯**: fetch API
- **3Dæ¸²æŸ“**: Three.js
- **è¯­éŸ³äº¤äº’**: Web Speech API

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œæ—¶**: Node.js
- **æ¡†æ¶**: Express.js
- **æ•°æ®åº“**: MySQL 8.0
- **æ•°æ®åº“é©±åŠ¨**: mysql2/promise
- **AI é›†æˆ**: DeepSeek API
- **æ–‡ä»¶ç›‘æ§**: chokidar (å·²å¼ƒç”¨)

### æ•°æ®åº“è®¾è®¡
- **æ ¸å¿ƒè¡¨**: projects, project_members, project_logs
- **AI ç›¸å…³**: ai_conversations, code_modifications
- **åŠ¨æ€è¡¨**: é¡¹ç›®æ–‡ä»¶è¡¨ (å¦‚ my_project), æ–‡ä»¶å¤¹è¡¨ (å¦‚ my_project__src)

## ğŸ”„ å¼€å‘å†ç¨‹

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„æ­å»º

#### 1.1 åˆå§‹è®¾è®¡æ€è·¯
æœ€åˆè®¡åˆ’å¼€å‘ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿç›‘æ§å·¥å…·ï¼Œç”¨æˆ·å¯ä»¥ï¼š
- é€‰æ‹©æœ¬åœ°æ–‡ä»¶å¤¹
- ç›‘æ§æ–‡ä»¶å˜åŒ–
- é›†æˆ AI è¿›è¡Œä»£ç åˆ†æ

#### 1.2 æŠ€æœ¯é€‰å‹
- å‰ç«¯ï¼šVue.js 3 (ç°ä»£åŒ–ã€æ˜“ä¸Šæ‰‹)
- åç«¯ï¼šNode.js + Express (è½»é‡çº§ã€å¿«é€Ÿå¼€å‘)
- æ•°æ®åº“ï¼šMySQL (ç¨³å®šã€åŠŸèƒ½ä¸°å¯Œ)
- AIï¼šDeepSeek (ä¸­æ–‡æ”¯æŒå¥½ã€ä»£ç èƒ½åŠ›å¼º)

#### 1.3 åŸºç¡€åŠŸèƒ½å®ç°
```javascript
// å‰ç«¯è·¯ç”±é…ç½®
const routes = [
  { path: '/', component: FolderSelect },
  { path: '/main', component: MainApp, meta: { requiresFolder: true } }
]

// åç«¯åŸºç¡€æœåŠ¡
app.post('/api/folder-info', async (req, res) => {
  // å¤„ç†æ–‡ä»¶å¤¹ä¿¡æ¯
})

app.post('/api/ai-chat', async (req, res) => {
  // AI å¯¹è¯æ¥å£
})
```

### ç¬¬äºŒé˜¶æ®µï¼šå“åº”å¼å¸ƒå±€ä¼˜åŒ–

#### 2.1 å¸ƒå±€é—®é¢˜
ç”¨æˆ·åé¦ˆé¡µé¢å¸ƒå±€éœ€è¦é€‚åº”æµè§ˆå™¨ï¼Œå®½åº¦å 100%ã€‚

#### 2.2 è§£å†³æ–¹æ¡ˆ
```css
/* å…¨å±€æ ·å¼è°ƒæ•´ */
* {
  box-sizing: border-box;
}

.container {
  width: 100%;
  max-width: none;
  padding: 0;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .sidebar {
    width: 100%;
    height: auto;
  }
}
```

#### 2.3 å®ç°æ•ˆæœ
- é¡µé¢å®½åº¦è‡ªé€‚åº”æµè§ˆå™¨
- ç§»åŠ¨ç«¯å‹å¥½
- ç»„ä»¶å¸ƒå±€ä¼˜åŒ–

### ç¬¬ä¸‰é˜¶æ®µï¼šAI é›†æˆ

#### 3.1 DeepSeek API é›†æˆ
```javascript
// AI æœåŠ¡é…ç½®
const DEEPSEEK_API_KEY = 'sk-d361ea4a6bc840a2881deab20372d761'
const DEEPSEEK_API_URL = 'https://api.deepseek.com/v1/chat/completions'

// AI å¯¹è¯å¤„ç†
async function processChat(userMessage, projectContext) {
  const systemPrompt = buildSystemPrompt(projectContext)
  const response = await axios.post(DEEPSEEK_API_URL, {
    model: 'deepseek-chat',
    messages: [
      { role: 'system', content: systemPrompt },
      { role: 'user', content: userMessage }
    ]
  })
  return response.data.choices[0].message.content
}
```

#### 3.2 AI åŠŸèƒ½å®ç°
- **ä»£ç åˆ†æ**: åˆ†æé¡¹ç›®ç»“æ„å’Œä»£ç è´¨é‡
- **ä¿®æ”¹å»ºè®®**: æä¾›ä»£ç ä¼˜åŒ–å»ºè®®
- **è‡ªåŠ¨æ“ä½œ**: æ‰§è¡Œæ–‡ä»¶åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤
- **æ—¥å¿—è®°å½•**: è®°å½•æ‰€æœ‰ AI æ“ä½œ

### ç¬¬å››é˜¶æ®µï¼šé‡å¤§æ¶æ„è°ƒæ•´ - äº‘å¼€å‘æ¨¡å¼

#### 4.1 é—®é¢˜è¯†åˆ«
åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°æµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼š
- æ— æ³•è·å–æœ¬åœ°æ–‡ä»¶çš„ç»å¯¹è·¯å¾„
- æ–‡ä»¶ç³»ç»Ÿè®¿é—®å—é™
- è·¨åŸŸé—®é¢˜

#### 4.2 æ¶æ„é‡æ„å†³ç­–
å†³å®šä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ¨¡å¼è½¬å‘äº‘å¼€å‘æ¨¡å¼ï¼š
- é¡¹ç›®åˆ›å»ºè€Œéæ–‡ä»¶å¤¹é€‰æ‹©
- æ•°æ®åº“å­˜å‚¨è€Œéæœ¬åœ°æ–‡ä»¶
- è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ

#### 4.3 æ–°çš„æ•°æ®æ¨¡å‹
```sql
-- é¡¹ç›®è¡¨
CREATE TABLE projects (
  id VARCHAR(8) PRIMARY KEY COMMENT 'é¡¹ç›®å”¯ä¸€ID',
  name VARCHAR(100) NOT NULL COMMENT 'é¡¹ç›®åç§°',
  description TEXT COMMENT 'é¡¹ç›®æè¿°',
  type VARCHAR(50) COMMENT 'é¡¹ç›®ç±»å‹',
  created_by VARCHAR(100) COMMENT 'åˆ›å»ºè€…',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´'
);

-- é¡¹ç›®æˆå‘˜è¡¨
CREATE TABLE project_members (
  id INT AUTO_INCREMENT PRIMARY KEY COMMENT 'æˆå‘˜ID',
  project_id VARCHAR(8) COMMENT 'é¡¹ç›®ID',
  user_id VARCHAR(100) COMMENT 'ç”¨æˆ·ID',
  role ENUM('owner', 'member') DEFAULT 'member' COMMENT 'è§’è‰²',
  joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åŠ å…¥æ—¶é—´'
);

-- é¡¹ç›®æ—¥å¿—è¡¨
CREATE TABLE project_logs (
  id INT AUTO_INCREMENT PRIMARY KEY COMMENT 'æ—¥å¿—ID',
  project_id VARCHAR(8) COMMENT 'é¡¹ç›®ID',
  user_id VARCHAR(100) COMMENT 'ç”¨æˆ·ID',
  action VARCHAR(100) COMMENT 'æ“ä½œç±»å‹',
  details JSON COMMENT 'æ“ä½œè¯¦æƒ…',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´'
);
```

### ç¬¬äº”é˜¶æ®µï¼šè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå®ç°

#### 5.1 æ–‡ä»¶å­˜å‚¨ç­–ç•¥
é‡‡ç”¨åˆ†å±‚å­˜å‚¨æ¨¡å¼ï¼š
- **é¡¹ç›®ä¸»è¡¨**: å­˜å‚¨æ ¹ç›®å½•æ–‡ä»¶/æ–‡ä»¶å¤¹ (å¦‚ `my_project`)
- **æ–‡ä»¶å¤¹è¡¨**: æ¯ä¸ªæ–‡ä»¶å¤¹ç‹¬ç«‹è¡¨ (å¦‚ `my_project__src`)

#### 5.2 åŠ¨æ€è¡¨åˆ›å»º
```javascript
// é¡¹ç›®æ–‡ä»¶è¡¨ç»“æ„
const createProjectFileTable = async (projectName) => {
  const tableName = generateSafeTableName(projectName)
  const sql = `
    CREATE TABLE ${tableName} (
      id INT AUTO_INCREMENT PRIMARY KEY COMMENT 'æ–‡ä»¶ID',
      file_path VARCHAR(500) COMMENT 'æ–‡ä»¶è·¯å¾„',
      file_name VARCHAR(255) NOT NULL COMMENT 'æ–‡ä»¶å',
      item_type ENUM('file', 'folder') NOT NULL COMMENT 'é¡¹ç›®ç±»å‹',
      file_type VARCHAR(50) COMMENT 'æ–‡ä»¶ç±»å‹',
      file_size BIGINT DEFAULT 0 COMMENT 'æ–‡ä»¶å¤§å°',
      parent_path VARCHAR(500) COMMENT 'çˆ¶è·¯å¾„',
      depth INT DEFAULT 0 COMMENT 'ç›®å½•æ·±åº¦',
      child_count INT DEFAULT 0 COMMENT 'å­é¡¹ç›®æ•°',
      file_count INT DEFAULT 0 COMMENT 'æ–‡ä»¶æ•°',
      folder_count INT DEFAULT 0 COMMENT 'æ–‡ä»¶å¤¹æ•°',
      content LONGTEXT COMMENT 'æ–‡ä»¶å†…å®¹',
      created_by VARCHAR(100) COMMENT 'åˆ›å»ºè€…',
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
      last_modified TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æœ€åä¿®æ”¹æ—¶é—´',
      status ENUM('active', 'deleted') DEFAULT 'active' COMMENT 'çŠ¶æ€'
    ) COMMENT 'é¡¹ç›®æ–‡ä»¶è¡¨'
  `
  await pool.execute(sql)
}
```

#### 5.3 æ–‡ä»¶æ“ä½œå®ç°
```javascript
// åˆ›å»ºæ–‡ä»¶å¤¹
const createFolder = async (projectId, folderName, parentPath) => {
  // 1. åœ¨é¡¹ç›®ä¸»è¡¨ä¸­åˆ›å»ºæ–‡ä»¶å¤¹è®°å½•
  await saveItemToProject(projectId, {
    file_name: folderName,
    item_type: 'folder',
    parent_path: parentPath
  })
  
  // 2. åˆ›å»ºæ–‡ä»¶å¤¹ä¸“ç”¨è¡¨
  const folderTableName = getFolderTableName(projectId, parentPath, folderName)
  await createFolderDataTable(folderTableName)
}

// åˆ›å»ºæ–‡ä»¶
const createFile = async (projectId, fileName, content, parentPath) => {
  const itemData = {
    file_name: fileName,
    item_type: 'file',
    content: content,
    parent_path: parentPath
  }
  
  // æ£€æŸ¥æ˜¯å¦æœ‰çˆ¶æ–‡ä»¶å¤¹è¡¨
  if (parentPath && await folderTableExists(projectId, parentPath)) {
    // å­˜å‚¨åˆ°æ–‡ä»¶å¤¹è¡¨
    await saveItemToFolderTable(projectId, parentPath, itemData)
  } else {
    // å­˜å‚¨åˆ°é¡¹ç›®ä¸»è¡¨
    await saveItemToProject(projectId, itemData)
  }
}
```

### ç¬¬å…­é˜¶æ®µï¼šå‰ç«¯ç»„ä»¶é‡æ„

#### 6.1 ç»„ä»¶æ¶æ„è°ƒæ•´
- **FolderSelect.vue** â†’ **ProjectCreate.vue**: é¡¹ç›®åˆ›å»º/åŠ å…¥
- **MainApp.vue**: é¡¹ç›®ä¸»ç•Œé¢ï¼Œé›†æˆæ–‡ä»¶ç®¡ç†
- **SimpleFileManager.vue**: æ–‡ä»¶ç®¡ç†å™¨ç»„ä»¶
- **FileTreeDisplay.vue**: æ–‡ä»¶æ ‘æ˜¾ç¤ºç»„ä»¶
- **AIChatBox.vue**: AI å¯¹è¯ç»„ä»¶

#### 6.2 çŠ¶æ€ç®¡ç†
```javascript
// é¡¹ç›®çŠ¶æ€ç®¡ç†
const currentProject = ref(null)
const projectFiles = ref([])
const projectLogs = ref([])

// æœ¬åœ°å­˜å‚¨
localStorage.setItem('currentProject', JSON.stringify(projectData))
const savedProject = JSON.parse(localStorage.getItem('currentProject'))
```

#### 6.3 å“åº”å¼æ•°æ®åŠ è½½
```javascript
// ç›‘å¬ projectId å˜åŒ–
watch(() => props.projectId, (newId) => {
  if (newId) {
    loadFiles()
  }
}, { immediate: true })

// ç»„ä»¶æŒ‚è½½æ£€æŸ¥
mounted() {
  if (this.projectId) {
    this.loadFiles()
  }
}
```

## ğŸ› ä¸»è¦é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. æµè§ˆå™¨æ–‡ä»¶è·¯å¾„é™åˆ¶

**é—®é¢˜**: æ— æ³•è·å–æœ¬åœ°æ–‡ä»¶çš„ç»å¯¹è·¯å¾„
```
webkitRelativePath: autoai/æ–°å»º æ–‡æœ¬æ–‡æ¡£.txt
åŸå§‹è·¯å¾„ (files[0].path): undefined
```

**è§£å†³æ–¹æ¡ˆ**: è½¬å‘äº‘å¼€å‘æ¨¡å¼
- é¡¹ç›®åˆ›å»ºè€Œéæ–‡ä»¶å¤¹é€‰æ‹©
- æ•°æ®åº“å­˜å‚¨æ–‡ä»¶ä¿¡æ¯
- è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ

### 2. JSON åºåˆ—åŒ–é—®é¢˜

**é—®é¢˜**: æ•°æ®åº“ JSON å­—æ®µè§£æé”™è¯¯
```
SyntaxError: Unexpected token 'c', "current_user" is not valid JSON
```

**è§£å†³æ–¹æ¡ˆ**: æ·»åŠ é”™è¯¯å¤„ç†
```javascript
try {
  const parsed = JSON.parse(jsonString)
  return parsed
} catch (error) {
  console.warn('JSON è§£æå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼:', error)
  return defaultValue
}
```

### 3. æ•°æ®åº“è¡¨å‘½åå†²çª

**é—®é¢˜**: æ—§å‘½åæ–¹å¼ `my_project_folder_src_25d902c2`
**æœŸæœ›**: æ–°å‘½åæ–¹å¼ `my_project__src`

**è§£å†³æ–¹æ¡ˆ**: åˆ›å»ºè¿ç§»è„šæœ¬
```javascript
// æ¸…ç†æ—§è¡¨
const cleanupDatabase = async () => {
  // åˆ é™¤æ—§è¡¨
  await pool.execute("DROP TABLE IF EXISTS my_project_folder_src_25d902c2")
  
  // åˆ›å»ºæ–°è¡¨
  await createFolderDataTable('my_project__src')
}
```

### 4. å‰ç«¯ç»„ä»¶æ—¶åºé—®é¢˜

**é—®é¢˜**: ç»„ä»¶åœ¨ projectId å¯ç”¨å‰å°±å°è¯•åŠ è½½æ•°æ®
```
GET http://localhost:3000/api/projects/null/file-tree 404 (Not Found)
```

**è§£å†³æ–¹æ¡ˆ**: æ·»åŠ æ¡ä»¶æ£€æŸ¥å’Œç›‘å¬å™¨
```javascript
// ç¦ç”¨æŒ‰é’®å½“ projectId ä¸ºç©º
:disabled="!projectId"

// ç›‘å¬ projectId å˜åŒ–
watch(() => props.projectId, (newId) => {
  if (newId) {
    loadData()
  }
})
```

### 5. Express è·¯ç”±é—®é¢˜

**é—®é¢˜**: é€šé…ç¬¦è·¯å¾„å‚æ•°è§£æé”™è¯¯
```
TypeError: Unexpected ( at 40, expected END: https://git.new/pathToRegexpError
```

**è§£å†³æ–¹æ¡ˆ**: ç®€åŒ–è·¯ç”±è®¾è®¡
```javascript
// ä»é€šé…ç¬¦è·¯ç”±
app.delete('/api/projects/:projectId/items/:itemPath(*)')

// æ”¹ä¸º body å‚æ•°
app.delete('/api/projects/:projectId/items')
// ä½¿ç”¨ req.body.itemPath
```

## âœ… å·²å®ç°åŠŸèƒ½

### 1. é¡¹ç›®ç®¡ç†
- âœ… é¡¹ç›®åˆ›å»º (è‹±æ–‡åç§°ï¼Œè‡ªåŠ¨ç”Ÿæˆ ID)
- âœ… é¡¹ç›®åŠ å…¥ (é€šè¿‡ ID)
- âœ… é¡¹ç›®ä¿¡æ¯ç®¡ç†
- âœ… é¡¹ç›®æˆå‘˜ç®¡ç†

### 2. æ–‡ä»¶ç³»ç»Ÿ
- âœ… è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
- âœ… æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ›å»º
- âœ… æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ é™¤
- âœ… æ–‡ä»¶å†…å®¹ç¼–è¾‘
- âœ… æ–‡ä»¶æ ‘æ˜¾ç¤º
- âœ… é¢åŒ…å±‘å¯¼èˆª

### 3. AI é›†æˆ
- âœ… DeepSeek API é›†æˆ
- âœ… AI å¯¹è¯åŠŸèƒ½
- âœ… ä»£ç åˆ†æå»ºè®®
- âœ… è‡ªåŠ¨æ–‡ä»¶æ“ä½œ
- âœ… æ“ä½œæ—¥å¿—è®°å½•

### 4. ç”¨æˆ·ç•Œé¢
- âœ… å“åº”å¼å¸ƒå±€
- âœ… é¡¹ç›®åˆ›å»ºé¡µé¢
- âœ… ä¸»åº”ç”¨ç•Œé¢
- âœ… æ–‡ä»¶ç®¡ç†å™¨
- âœ… AI èŠå¤©æ¡†

### 5. æ•°æ®åº“ç®¡ç†
- âœ… åŠ¨æ€è¡¨åˆ›å»º
- âœ… åˆ†å±‚å­˜å‚¨ç­–ç•¥
- âœ… æ•°æ®è¿ç§»å·¥å…·
- âœ… æ•°æ®åº“æ¸…ç†å·¥å…·

### 6. æ—¥å¿—ç³»ç»Ÿ
- âœ… é¡¹ç›®æ“ä½œæ—¥å¿—
- âœ… AI å¯¹è¯è®°å½•
- âœ… ä»£ç ä¿®æ”¹è®°å½•
- âœ… ç”¨æˆ·æ´»åŠ¨è¿½è¸ª

### 7. å®æ—¶é¢„è§ˆç³»ç»Ÿ
- âœ… HTMLæ–‡ä»¶å®æ—¶é¢„è§ˆ
- âœ… ä»£ç ç¼–è¾‘å™¨é›†æˆ
- âœ… åŒæ¨¡å¼åˆ‡æ¢ï¼ˆé¢„è§ˆ/ç¼–è¾‘ï¼‰
- âœ… å®æ—¶ä¿å­˜åŠŸèƒ½
- âœ… æ–‡ä»¶å†…å®¹åŒæ­¥

### 8. AIåŠŸèƒ½å¢å¼º
- âœ… æ™ºèƒ½æ–‡ä»¶è·¯å¾„æŸ¥æ‰¾
- âœ… é¡¹ç›®ç»“æ„åˆ†æ
- âœ… æ‰¹é‡æ–‡ä»¶æ“ä½œ
- âœ… æ–‡ä»¶åˆ é™¤åŠŸèƒ½å®Œå–„
- âœ… æ•°æ®åº“å­—æ®µä¿®å¤

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

### ä»£ç è§„æ¨¡
- **å‰ç«¯**: ~3000 è¡Œä»£ç 
- **åç«¯**: ~2000 è¡Œä»£ç 
- **æ•°æ®åº“**: 8 ä¸ªæ ¸å¿ƒè¡¨ + åŠ¨æ€è¡¨
- **ç»„ä»¶**: 8 ä¸ªä¸»è¦ç»„ä»¶

### åŠŸèƒ½è¦†ç›–
- **é¡¹ç›®ç®¡ç†**: 100%
- **æ–‡ä»¶æ“ä½œ**: 95%
- **AI é›†æˆ**: 90%
- **ç”¨æˆ·ç•Œé¢**: 95%
- **æ•°æ®ç®¡ç†**: 95%
- **å®æ—¶é¢„è§ˆ**: 90%

## ğŸš€ éƒ¨ç½²è¯´æ˜

### ç¯å¢ƒè¦æ±‚
- Node.js 16+
- MySQL 8.0+
- Vue CLI 5+

### å®‰è£…æ­¥éª¤
```bash
# åç«¯
cd backend
npm install
npm start

# å‰ç«¯
cd frontend
npm install
npm run dev
```

### æ•°æ®åº“åˆå§‹åŒ–
```bash
node reset-database.js
node fix-database.js
```

### ç¬¬ä¸ƒé˜¶æ®µï¼šå®æ—¶é¢„è§ˆå’Œä»£ç ç¼–è¾‘ç³»ç»Ÿ

#### 7.1 å®æ—¶é¢„è§ˆåŠŸèƒ½å®ç°
```javascript
// é¢„è§ˆAPIå®ç°
app.get('/api/projects/:projectId/preview', async (req, res) => {
  const { projectId } = req.params
  const { filePath } = req.query
  
  // è·å–æ–‡ä»¶å†…å®¹å¹¶è¿”å›HTML
  const fileResult = await projectService.getFileContent(projectId, projectName, filePath)
  res.setHeader('Content-Type', 'text/html')
  res.send(fileResult.data.content)
})
```

#### 7.2 ä»£ç ç¼–è¾‘å™¨é›†æˆ
- **åŒæ¨¡å¼åˆ‡æ¢**: é¢„è§ˆæ¨¡å¼å’Œä»£ç ç¼–è¾‘æ¨¡å¼
- **å®æ—¶ä¿å­˜**: ä»£ç ä¿®æ”¹åè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
- **è¯­æ³•é«˜äº®**: æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®
- **æ–‡ä»¶ç±»å‹æ£€æµ‹**: æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨è¯†åˆ«æ–‡ä»¶ç±»å‹

#### 7.3 å¸ƒå±€ä¼˜åŒ–
- **ä¸‰æ å¸ƒå±€**: æ–‡ä»¶æ ‘ | é¢„è§ˆ/ç¼–è¾‘å™¨ | AIåŠ©æ‰‹
- **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **é«˜åº¦è‡ªé€‚åº”**: é¢„è§ˆå†…å®¹å æ»¡å¯ç”¨ç©ºé—´

### ç¬¬å…«é˜¶æ®µï¼šAIåŠŸèƒ½å¢å¼º

#### 8.1 æ™ºèƒ½æ–‡ä»¶æ“ä½œ
```javascript
// AIæ–‡ä»¶åˆ é™¤åŠŸèƒ½
async executeFileOperation(projectId, operation, fileName) {
  // æŸ¥æ‰¾æ–‡ä»¶å®é™…è·¯å¾„
  const fileTree = await projectService.getProjectFileTree(projectId, projectName)
  const foundFile = this.findFileInTree(fileTree.data, fileName)
  
  if (foundFile) {
    // æ‰§è¡Œå®é™…åˆ é™¤æ“ä½œ
    const deleteResult = await projectService.deleteFile(projectId, fileName, foundFile.file_path)
    return deleteResult
  }
}
```

#### 8.2 æ–‡ä»¶ç»“æ„æŸ¥è¯¢
- **æ™ºèƒ½è·¯å¾„æŸ¥æ‰¾**: AIèƒ½å¤ŸæŸ¥è¯¢æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
- **é¡¹ç›®ç»“æ„åˆ†æ**: è·å–å®Œæ•´çš„é¡¹ç›®æ–‡ä»¶æ ‘ç»“æ„
- **æ‰¹é‡æ“ä½œæ”¯æŒ**: æ”¯æŒæ‰¹é‡åˆ é™¤å’Œä¿®æ”¹æ“ä½œ

#### 8.3 æ•°æ®åº“å­—æ®µä¿®å¤
- **è¡¨ç»“æ„ç»Ÿä¸€**: ä¿®å¤AIç›¸å…³è¡¨çš„å­—æ®µæ˜ å°„é—®é¢˜
- **æ•°æ®ç±»å‹åŒ¹é…**: ç¡®ä¿å­—æ®µç±»å‹ä¸æ•°æ®åº“è¡¨ç»“æ„ä¸€è‡´
- **é”™è¯¯å¤„ç†ä¼˜åŒ–**: æ·»åŠ å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶

### ç¬¬ä¹é˜¶æ®µï¼šAIæ–‡ä»¶ä¿®æ”¹åŠŸèƒ½å®Œå–„

#### 9.1 ä¿®æ”¹æ£€æµ‹é€»è¾‘ä¼˜åŒ–
**é—®é¢˜**: AIæ— æ³•æ­£ç¡®è¯†åˆ«ç”¨æˆ·çš„æ–‡ä»¶ä¿®æ”¹è¯·æ±‚ï¼Œæ€»æ˜¯åˆ›å»ºæ–°æ–‡ä»¶è€Œä¸æ˜¯ä¿®æ”¹ç°æœ‰æ–‡ä»¶ã€‚

**è§£å†³æ–¹æ¡ˆ**: å®Œå–„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¨¡å¼
```javascript
// æ–°å¢"æŠŠxxxæ”¹æˆxxx"è¡¨è¾¾æ–¹å¼æ”¯æŒ
const modificationPatterns = [
  /æŠŠ\s*([a-zA-Z0-9_\-\.]+\.(html|css|js|vue|ts|jsx|tsx|json|md|txt|py|java|cpp|c|php|go|rs|rb|swift|kt|scala|sh|bat|sql|xml|yaml|yml))æ”¹æˆ/i,
  /æŠŠ\s*([a-zA-Z0-9_\-\.]+\.(html|css|js|vue|ts|jsx|tsx|json|md|txt|py|java|cpp|c|php|go|rs|rb|swift|kt|scala|sh|bat|sql|xml|yaml|yml))æ”¹ä¸º/i,
  /æŠŠ\s*([a-zA-Z0-9_\-\.]+\.(html|css|js|vue|ts|jsx|tsx|json|md|txt|py|java|cpp|c|php|go|rs|rb|swift|kt|scala|sh|bat|sql|xml|yaml|yml))å˜æˆ/i,
  /æŠŠ\s*([a-zA-Z0-9_\-\.]+\.(html|css|js|vue|ts|jsx|tsx|json|md|txt|py|java|cpp|c|php|go|rs|rb|swift|kt|scala|sh|bat|sql|xml|yaml|yml))åšæˆ/i
];
```

#### 9.2 å…ˆåˆ é™¤å†åˆ›å»ºç­–ç•¥
**é—®é¢˜**: ç”¨æˆ·è¦æ±‚ä¿®æ”¹ç°æœ‰æ–‡ä»¶ï¼Œä½†AIåˆ›å»ºäº†æ–°æ–‡ä»¶ã€‚

**è§£å†³æ–¹æ¡ˆ**: å®ç°"å…ˆåˆ é™¤å†åˆ›å»º"çš„ä¿®æ”¹ç­–ç•¥
```javascript
// ä¿®æ”¹ç°æœ‰æ–‡ä»¶çš„å®Œæ•´æµç¨‹
if (fileInfo.success) { // æ–‡ä»¶å­˜åœ¨
  // 1. è°ƒç”¨DeepSeek APIç”Ÿæˆæ–°å†…å®¹
  const messages = [
    { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä»£ç åŠ©æ‰‹ï¼Œä¸“é—¨å¸®åŠ©ç”¨æˆ·åˆ›å»ºå’Œä¿®æ”¹ä»£ç æ–‡ä»¶ã€‚' },
    { role: 'user', content: modificationPrompt }
  ];
  const aiResponse = await this.callDeepSeekAPI(messages);
  
  if (aiResponse) {
    // 2. åˆ é™¤ç°æœ‰æ–‡ä»¶
    const deleteResult = await projectService.deleteFile(projectId, fileName, fileInfo.data.filePath);
    
    if (deleteResult.success) {
      // 3. åˆ›å»ºæ–°æ–‡ä»¶
      const fileData = {
        file_name: fileName,
        file_type: fileName.split('.').pop() || 'txt',
        content: aiResponse,
        parent_path: '',
        file_size: aiResponse.length,
        created_by: 'ai_assistant'
      };
      const createResult = await projectService.createFile(projectId, projectName, fileData);
    }
  }
}
```

#### 9.3 APIå‚æ•°æ ¼å¼ä¿®å¤
**é—®é¢˜**: `callDeepSeekAPI` æ–¹æ³•å‚æ•°æ ¼å¼é”™è¯¯å¯¼è‡´JSONåºåˆ—åŒ–å¤±è´¥ã€‚

**è§£å†³æ–¹æ¡ˆ**: ç»Ÿä¸€APIè°ƒç”¨æ ¼å¼
```javascript
// ä¿®å¤å‰ï¼šä¼ é€’å­—ç¬¦ä¸²
const aiResponse = await this.callDeepSeekAPI(modificationPrompt);

// ä¿®å¤åï¼šä¼ é€’messagesæ•°ç»„
const messages = [
  { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä»£ç åŠ©æ‰‹ï¼Œä¸“é—¨å¸®åŠ©ç”¨æˆ·åˆ›å»ºå’Œä¿®æ”¹ä»£ç æ–‡ä»¶ã€‚' },
  { role: 'user', content: modificationPrompt }
];
const aiResponse = await this.callDeepSeekAPI(messages);
```

#### 9.4 æ•°æ®åº“å‚æ•°ä¿®å¤
**é—®é¢˜**: `createFile` æ–¹æ³•å‚æ•°æ ¼å¼ä¸åŒ¹é…å¯¼è‡´"Bind parameters must not contain undefined"é”™è¯¯ã€‚

**è§£å†³æ–¹æ¡ˆ**: ç»Ÿä¸€æ–‡ä»¶æ•°æ®å¯¹è±¡æ ¼å¼
```javascript
// ä¿®å¤å‰ï¼šä¼ é€’å¤šä¸ªç‹¬ç«‹å‚æ•°
const createResult = await projectService.createFile(projectId, fileName, aiResponse, '');

// ä¿®å¤åï¼šä¼ é€’å®Œæ•´çš„fileDataå¯¹è±¡
const fileData = {
  file_name: fileName,
  file_type: fileName.split('.').pop() || 'txt',
  content: aiResponse,
  parent_path: '',
  file_size: aiResponse.length,
  created_by: 'ai_assistant'
};
const createResult = await projectService.createFile(projectId, projectName, fileData);
```

#### 9.5 åŠŸèƒ½éªŒè¯ç»“æœ
ç»è¿‡å®Œæ•´ä¿®å¤åï¼ŒAIæ–‡ä»¶ä¿®æ”¹åŠŸèƒ½ç°åœ¨èƒ½å¤Ÿï¼š
- âœ… **æ­£ç¡®æ£€æµ‹ä¿®æ”¹è¯·æ±‚**: è¯†åˆ«"æŠŠindex.htmlæ”¹æˆäºŒæ¬¡å…ƒé£æ ¼çš„ä¸ªäººä»‹ç»é¡µé¢"
- âœ… **æ‰§è¡Œåˆ é™¤æ“ä½œ**: æˆåŠŸåˆ é™¤ç°æœ‰çš„ `index.html` æ–‡ä»¶
- âœ… **è°ƒç”¨AIç”Ÿæˆå†…å®¹**: DeepSeek APIæˆåŠŸç”Ÿæˆæ–°å†…å®¹
- âœ… **åˆ›å»ºæ–°æ–‡ä»¶**: æˆåŠŸåˆ›å»ºä¿®æ”¹åçš„æ–‡ä»¶
- âœ… **è¿”å›æ“ä½œæ—¥å¿—**: æä¾›è¯¦ç»†çš„æ“ä½œè®°å½•å’ŒçŠ¶æ€åé¦ˆ

### ç¬¬åé˜¶æ®µï¼šVueæ–‡ä»¶é¢„è§ˆåŠŸèƒ½å®ç°

#### 10.1 Vueé¢„è§ˆéœ€æ±‚åˆ†æ
**é—®é¢˜**: ç”¨æˆ·å¸Œæœ›Vueæ–‡ä»¶ä¹Ÿå¯ä»¥é¢„è§ˆï¼Œå°±åƒå¼€å‘appä¸€æ ·ï¼Œå¯ä»¥é¢„è§ˆVueç»„ä»¶çš„æ ·å¼å’Œæ•ˆæœã€‚

**æŠ€æœ¯æŒ‘æˆ˜**: 
1. **SFCè§£æ**: Vueå•æ–‡ä»¶ç»„ä»¶åŒ…å«templateã€scriptã€styleä¸‰ä¸ªéƒ¨åˆ†
2. **Vueè¿è¡Œæ—¶**: éœ€è¦Vue 3 CDNæ¥è¿è¡Œç»„ä»¶
3. **ç»„ä»¶åŒ…è£…**: å°†Vueç»„ä»¶åŒ…è£…åœ¨HTMLä¸­å®ç°é¢„è§ˆ

#### 10.2 åç«¯é¢„è§ˆAPIæ‰©å±•
```javascript
// åœ¨ backend/index.js ä¸­æ‰©å±•é¢„è§ˆAPI
app.get('/api/projects/:projectId/preview', async (req, res) => {
  if (file.file_name.endsWith('.vue')) {
    // è§£æVue SFC
    const templateMatch = vueContent.match(/<template[^>]*>([\s\S]*?)<\/template>/);
    const scriptMatch = vueContent.match(/<script[^>]*>([\s\S]*?)<\/script>/);
    const styleMatch = vueContent.match(/<style[^>]*>([\s\S]*?)<\/style>/);
    
    // ç”ŸæˆHTMLåŒ…è£…å™¨
    const htmlWrapper = `
      <!DOCTYPE html>
      <html lang="zh-CN">
      <head>
          <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
          <style>${style}</style>
      </head>
      <body>
          <div id="vue-app">${template}</div>
          <script>
              const { createApp } = Vue;
              ${script}
              const app = createApp(componentConfig);
              app.mount('#vue-app');
          </script>
      </body>
      </html>`;
    
    res.setHeader('Content-Type', 'text/html; charset=utf-8');
    res.send(htmlWrapper);
  }
});
```

#### 10.3 å‰ç«¯é¢„è§ˆç»„ä»¶æ›´æ–°
```javascript
// åœ¨ ProjectPreview.vue ä¸­æ·»åŠ Vueæ–‡ä»¶æ”¯æŒ
async loadPreviewFiles() {
  this.htmlFiles = result.data.filter(file =>
    file.item_type === 'file' &&
    (file.file_name.endsWith('.html') ||
     file.file_name.endsWith('.htm') ||
     file.file_name.endsWith('.vue')) // æ·»åŠ Vueæ–‡ä»¶æ”¯æŒ
  )
}

isPreviewableFile(fileName) {
  return fileName.endsWith('.html') || 
         fileName.endsWith('.htm') || 
         fileName.endsWith('.vue'); // æ·»åŠ Vueæ–‡ä»¶æ”¯æŒ
}
```

#### 10.4 åŠŸèƒ½éªŒè¯ç»“æœ
- âœ… **Vueæ–‡ä»¶é¢„è§ˆ**: Vueç»„ä»¶æ­£ç¡®æ¸²æŸ“å’Œæ˜¾ç¤º
- âœ… **Vue 3 CDN**: æˆåŠŸåŠ è½½Vue 3 CDN
- âœ… **SFCè§£æ**: æ­£ç¡®è§£ætemplateã€scriptã€styleéƒ¨åˆ†
- âœ… **æ ·å¼åº”ç”¨**: Vueç»„ä»¶çš„æ ·å¼æ­£ç¡®åº”ç”¨
- âœ… **é¢„è§ˆç•Œé¢**: ç¾è§‚ä¸”åŠŸèƒ½å®Œæ•´çš„é¢„è§ˆç•Œé¢

### ç¬¬åä¸€é˜¶æ®µï¼šè·¯å¾„é‡å¤é—®é¢˜è°ƒè¯•å’Œä¿®å¤

#### 11.1 é—®é¢˜è¯†åˆ«
**é—®é¢˜**: AIåˆ›å»ºå¸¦è·¯å¾„çš„æ–‡ä»¶æ—¶ï¼Œæ•°æ®åº“ä¸­å­˜å‚¨çš„è·¯å¾„å‡ºç°é‡å¤ï¼Œä¾‹å¦‚ `views/views/HomePage.vue`ã€‚

**è°ƒè¯•ç­–ç•¥**: æ·»åŠ è¯¦ç»†çš„è·¯å¾„è§£æè°ƒè¯•æ—¥å¿—
```javascript
// åœ¨ projectService.js çš„ createFile æ–¹æ³•ä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯
console.log(`ğŸ” è·¯å¾„è§£æè°ƒè¯•ä¿¡æ¯:`);
console.log(`  - åŸå§‹file_name: ${fileData.file_name}`);
console.log(`  - pathParts: ${JSON.stringify(pathParts)}`);
console.log(`  - actualFileName: ${actualFileName}`);
console.log(`  - extractedParentPath: ${extractedParentPath}`);
console.log(`  - ä¼ å…¥çš„parent_path: ${fileData.parent_path}`);
```

#### 11.2 è·¯å¾„å¤„ç†é€»è¾‘ä¿®å¤
```javascript
// åœ¨ saveItemToFolderTable æ–¹æ³•ä¸­ä¿®å¤è·¯å¾„å¤„ç†
const modifiedItemData = {
  ...itemData,
  parent_path: null,
  file_path: `/${itemData.file_name}` // ç¡®ä¿file_pathåªåŒ…å«æ–‡ä»¶å
};
```

#### 11.3 è¯­æ³•é”™è¯¯ä¿®å¤
**é—®é¢˜**: `projectService.js` æ–‡ä»¶å‡ºç°è¯­æ³•é”™è¯¯ï¼Œå¯¼è‡´åç«¯æœåŠ¡æ— æ³•æ­£å¸¸å¯åŠ¨ã€‚

**è§£å†³æ–¹æ¡ˆ**: ä¿®å¤èŠ±æ‹¬å·ä¸åŒ¹é…é—®é¢˜
```javascript
// ä¿®å¤å‰ï¼šå¤šä½™çš„é—­åˆèŠ±æ‹¬å·
if (fileData.parent_path && folderTableName) {
  // ... ä»£ç é€»è¾‘
  return result
}  // å¤šä½™çš„èŠ±æ‹¬å·
}  // å¤šä½™çš„èŠ±æ‹¬å·

// ä¿®å¤åï¼šæ­£ç¡®çš„èŠ±æ‹¬å·åŒ¹é…
if (fileData.parent_path && folderTableName) {
  // ... ä»£ç é€»è¾‘
  return result
}  // æ­£ç¡®é—­åˆifè¯­å¥å—
```

### ç¬¬åäºŒé˜¶æ®µï¼šé¡¹ç›®æ–‡ä»¶æ¸…ç†å’Œä¼˜åŒ–

#### 12.1 æ¸…ç†èŒƒå›´
- **æ ¹ç›®å½•æµ‹è¯•æ–‡ä»¶**: 8ä¸ªæµ‹è¯•å’Œè°ƒè¯•è„šæœ¬
- **backendç›®å½•æµ‹è¯•æ–‡ä»¶**: 15ä¸ªæµ‹è¯•å’Œè°ƒè¯•è„šæœ¬
- **ä¸´æ—¶æ–‡ä»¶**: AIç”Ÿæˆçš„æ–‡ä»¶ã€è°ƒè¯•è¾“å‡ºæ–‡ä»¶
- **é‡å¤æ–‡ä»¶**: æ ¹ç›®å½•å’Œbackendç›®å½•ä¸­çš„é‡å¤æ–‡ä»¶

#### 12.2 æ¸…ç†ç»“æœ
- âœ… åˆ é™¤äº†23ä¸ªæµ‹è¯•å’Œè°ƒè¯•æ–‡ä»¶
- âœ… åˆ é™¤äº†2ä¸ªAIç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶
- âœ… åˆ é™¤äº†æ ¹ç›®å½•çš„é‡å¤é…ç½®æ–‡ä»¶
- âœ… åˆ é™¤äº†ç©ºçš„node_modulesç›®å½•
- âœ… é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°æ•´æ´

#### 12.3 ä¿ç•™çš„é‡è¦æ–‡ä»¶
- âœ… æ ¸å¿ƒåŠŸèƒ½ä»£ç 
- âœ… é…ç½®æ–‡ä»¶
- âœ… æ–‡æ¡£æ–‡ä»¶
- âœ… å¯åŠ¨è„šæœ¬

### ç¬¬åä¸‰é˜¶æ®µï¼š3Dæ¨¡å‹é›†æˆä¸è¯­éŸ³äº¤äº’

#### 13.1 Three.js 3Dæ¨¡å‹é›†æˆ
**éœ€æ±‚**: ç”¨æˆ·å¸Œæœ›åœ¨é¡¹ç›®ä¸­é›†æˆ3Dæ¨¡å‹ï¼Œæä¾›æ›´ä¸°å¯Œçš„äº¤äº’ä½“éªŒã€‚

**æŠ€æœ¯å®ç°**:
```javascript
// ThreeModelViewer.vue - å…¨å±€3DåŠ©æ‰‹ç»„ä»¶
import * as THREE from 'three'
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'

// 3Dåœºæ™¯åˆå§‹åŒ–
initThree() {
  this.scene = new THREE.Scene()
  this.camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000)
  this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true })
  
  // åŠ è½½GLBæ¨¡å‹
  const loader = new GLTFLoader()
  loader.load('/models/cute_home_robot.glb', (gltf) => {
    this.model = gltf.scene
    this.scene.add(this.model)
    this.setupAnimation(gltf.animations)
  })
}
```

#### 13.2 è¯­éŸ³äº¤äº’ç³»ç»Ÿ
**åŠŸèƒ½**: åŒå‡»3Dæ¨¡å‹å¯åŠ¨è¯­éŸ³è¯†åˆ«ï¼Œæ”¯æŒè¯­éŸ³å¯¹è¯å’ŒAIå›ç­”æœ—è¯»ã€‚

**æŠ€æœ¯å®ç°**:
```javascript
// è¯­éŸ³è¯†åˆ«
startSpeechRecognition() {
  const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)()
  recognition.lang = 'zh-CN'
  recognition.continuous = false
  recognition.interimResults = false
  
  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript
    this.sendToAIChat(transcript) // å‘é€åˆ°AIèŠå¤©
  }
}

// è¯­éŸ³åˆæˆ
speak(text) {
  const utterance = new SpeechSynthesisUtterance(text)
  utterance.lang = 'zh-CN'
  utterance.rate = 0.9
  speechSynthesis.speak(utterance)
}
```

#### 13.3 å…¨å±€ç»„ä»¶é›†æˆ
- âœ… **ThreeModelViewer**: å…¨å±€æ³¨å†Œçš„3DåŠ©æ‰‹ç»„ä»¶
- âœ… **å›ºå®šä½ç½®**: å³ä¸‹è§’å›ºå®šä½ç½®ï¼Œ150x150px
- âœ… **æ‹–æ‹½åŠŸèƒ½**: æ”¯æŒé¼ æ ‡æ‹–æ‹½ç§»åŠ¨
- âœ… **è¯­éŸ³äº¤äº’**: åŒå‡»å¯åŠ¨è¯­éŸ³è¯†åˆ«
- âœ… **AIé›†æˆ**: è¯­éŸ³é—®é¢˜è‡ªåŠ¨å‘é€åˆ°AIèŠå¤©é¡µé¢

### ç¬¬åå››é˜¶æ®µï¼šç”¨æˆ·ä¸“å±AIè®°å¿†ç³»ç»Ÿ

#### 14.1 chathistoryæ•°æ®è¡¨è®¾è®¡
**éœ€æ±‚**: ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºç‹¬ç«‹çš„AIå¯¹è¯å†å²ï¼Œå®ç°é•¿æœŸè®°å¿†åŠŸèƒ½ã€‚

**æ•°æ®åº“è®¾è®¡**:
```sql
CREATE TABLE chathistory (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id VARCHAR(50) NOT NULL,
  user_name VARCHAR(100) DEFAULT 'ç”¨æˆ·',
  user_message TEXT NOT NULL,
  ai_response TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_user_id (user_id),
  INDEX idx_created_at (created_at),
  INDEX idx_user_created (user_id, created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

#### 14.2 ç”¨æˆ·ç»‘å®šé€»è¾‘
**å‰ç«¯å®ç°**:
```javascript
// Files.vue - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
getCurrentUser() {
  const currentUser = localStorage.getItem('currentUser')
  if (currentUser) {
    const user = JSON.parse(currentUser)
    this.userId = user.id || user.username || 'default_user'
  }
}
```

**åç«¯å®ç°**:
```javascript
// è·å–ç”¨æˆ·ä¸“å±å†å²è®°å½•
const [historyRecords] = await pool.execute(
  'SELECT user_message, ai_response FROM chathistory WHERE user_id = ? ORDER BY created_at ASC',
  [userId]
)

// ä¿å­˜æ–°å¯¹è¯è®°å½•
await pool.execute(
  'INSERT INTO chathistory (user_id, user_name, user_message, ai_response) VALUES (?, ?, ?, ?)',
  [userId, userName, message, aiResponse]
)
```

#### 14.3 é•¿æœŸè®°å¿†åŠŸèƒ½
- âœ… **ç”¨æˆ·éš”ç¦»**: æ¯ä¸ªç”¨æˆ·çš„AIè®°å¿†å®Œå…¨ç‹¬ç«‹
- âœ… **å®Œæ•´å†å²**: AIèƒ½å¤Ÿè®°ä½ç”¨æˆ·çš„æ‰€æœ‰å¯¹è¯å†å²
- âœ… **ä¸Šä¸‹æ–‡ç†è§£**: åŸºäºç”¨æˆ·ä¸“å±å†å²æä¾›ä¸ªæ€§åŒ–å›ç­”
- âœ… **æ•°æ®å®‰å…¨**: ç”¨æˆ·æ•°æ®å®Œå…¨åˆ†ç¦»ï¼Œä¿æŠ¤éšç§

### ç¬¬åäº”é˜¶æ®µï¼šé¡¹ç›®ç±»å‹ç³»ç»Ÿ

#### 15.1 é¡¹ç›®ç±»å‹é…ç½®
**éœ€æ±‚**: æ”¯æŒä¸åŒç±»å‹çš„é¡¹ç›®ï¼Œæ¯ç§ç±»å‹æœ‰ä¸“å±çš„é…ç½®å’ŒAIæç¤ºè¯ã€‚

**é…ç½®ç³»ç»Ÿ**:
```javascript
// projectTypeService.js - é¡¹ç›®ç±»å‹é…ç½®æœåŠ¡
const projectTypeConfigs = {
  'html': {
    name: 'HTMLé¡¹ç›®',
    icon: 'ğŸŒ',
    techStack: 'HTML5, CSS3, JavaScript, Bootstrap',
    aiPrompt: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„HTMLå‰ç«¯å¼€å‘ä¸“å®¶...',
    baseStructure: {
      'index.html': '<!DOCTYPE html>...',
      'styles/main.css': 'body { ... }',
      'scripts/main.js': 'console.log(...)'
    }
  },
  'vue': {
    name: 'Vueé¡¹ç›®',
    icon: 'ğŸ’š',
    techStack: 'Vue3, Vue Router, Pinia, Element Plus',
    aiPrompt: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„Vue.jså‰ç«¯å¼€å‘ä¸“å®¶...',
    baseStructure: {
      'package.json': '{ ... }',
      'vite.config.js': 'import { ... }',
      'src/main.js': 'import { ... }',
      'src/App.vue': '<script setup>...'
    }
  }
  // ... å…¶ä»–ç±»å‹
}
```

#### 15.2 åŠ¨æ€æ–‡ä»¶ç”Ÿæˆ
**å®ç°**: åˆ›å»ºé¡¹ç›®æ—¶æ ¹æ®ç±»å‹è‡ªåŠ¨ç”ŸæˆåŸºç¡€æ–‡ä»¶ç»“æ„ã€‚

```javascript
// ç”Ÿæˆé¡¹ç›®åŸºç¡€æ–‡ä»¶
const projectFiles = projectTypeService.generateProjectFiles(type, name)
for (const [filePath, content] of Object.entries(projectFiles)) {
  // åˆ›å»ºæ–‡ä»¶å¤¹è®°å½•
  if (parentPath) {
    await pool.execute(
      `INSERT INTO \`${safeTableName}\` (file_name, file_path, parent_path, item_type) VALUES (?, ?, ?, 'folder')`,
      [folderName, parentPath, null]
    )
  }
  
  // åˆ›å»ºæ–‡ä»¶è®°å½•
  await pool.execute(
    `INSERT INTO \`${safeTableName}\` (file_name, file_path, parent_path, file_content, item_type) VALUES (?, ?, ?, ?, 'file')`,
    [fileName, filePath, parentPath, content]
  )
}
```

#### 15.3 æ™ºèƒ½AIæç¤º
- âœ… **ç±»å‹æ„ŸçŸ¥**: AIæ ¹æ®é¡¹ç›®ç±»å‹æä¾›ä¸“ä¸šå»ºè®®
- âœ… **æŠ€æœ¯æ ˆåŒ¹é…**: æç¤ºè¯åŒ…å«å¯¹åº”çš„æŠ€æœ¯æ ˆä¿¡æ¯
- âœ… **æœ€ä½³å®è·µ**: æ¯ç§ç±»å‹éƒ½æœ‰å¯¹åº”çš„å¼€å‘æœ€ä½³å®è·µ
- âœ… **åŠ¨æ€é…ç½®**: æ”¯æŒæ‰©å±•æ–°çš„é¡¹ç›®ç±»å‹

### ç¬¬åå…­é˜¶æ®µï¼šæ–‡ä»¶æ ‘ç³»ç»Ÿé‡æ„

#### 16.1 æ–‡ä»¶å¤¹è¡¨æ˜ å°„
**é—®é¢˜**: åŸæœ‰çš„æ–‡ä»¶æ ‘æ˜¾ç¤ºä¸å®Œæ•´ï¼Œæ— æ³•æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚

**è§£å†³æ–¹æ¡ˆ**: å®ç°æ–‡ä»¶å¤¹è¡¨æ˜ å°„ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹å¯¹åº”ç‹¬ç«‹çš„æ•°æ®åº“è¡¨ã€‚

```javascript
// æ–‡ä»¶æ ‘æ„å»ºé€»è¾‘
async getProjectFileTree(projectId, projectName) {
  const safeTableName = this.generateSafeTableName(projectName)
  
  // è·å–æ‰€æœ‰ç›¸å…³çš„è¡¨
  const [allTables] = await pool.execute(`SHOW TABLES LIKE '${safeTableName}%'`)
  
  const fileTree = []
  
  // å¤„ç†ä¸»é¡¹ç›®è¡¨ï¼ˆæ ¹çº§æ–‡ä»¶ï¼‰
  const [mainItems] = await pool.execute(`SELECT * FROM \`${safeTableName}\` ORDER BY file_name ASC`)
  
  // å¤„ç†æ–‡ä»¶å¤¹è¡¨
  for (const tableRow of allTables) {
    const tableName = Object.values(tableRow)[0]
    if (tableName === safeTableName) continue // è·³è¿‡ä¸»é¡¹ç›®è¡¨
    
    const [folderItems] = await pool.execute(`SELECT * FROM \`${tableName}\` ORDER BY file_name ASC`)
    
    if (folderItems.length > 0) {
      // è§£æè¡¨åè·å–æ–‡ä»¶å¤¹è·¯å¾„
      const folderPath = tableName.replace(safeTableName + '__', '').replace(/_/g, '/')
      const folderName = folderPath.split('/').pop()
      
      // åˆ›å»ºæ–‡ä»¶å¤¹èŠ‚ç‚¹
      const folderNode = {
        id: `folder_${folderName}`,
        file_path: '/' + folderPath,
        file_name: folderName,
        item_type: 'folder',
        children: folderItems.map(item => ({
          ...item,
          file_path: '/' + folderPath + '/' + item.file_name,
          children: []
        }))
      }
      
      fileTree.push(folderNode)
    }
  }
  
  return { success: true, data: fileTree }
}
```

#### 16.2 å±‚çº§ç»“æ„æ”¯æŒ
- âœ… **æ— é™å±‚çº§**: æ”¯æŒä»»æ„æ·±åº¦çš„æ–‡ä»¶å¤¹åµŒå¥—
- âœ… **è¡¨åæ˜ å°„**: æ–‡ä»¶å¤¹è¡¨åæ­£ç¡®åæ˜ å±‚çº§å…³ç³»
- âœ… **å®Œæ•´æ˜¾ç¤º**: æ–‡ä»¶æ ‘æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å¤¹å’Œæ–‡ä»¶
- âœ… **åŠ¨æ€åŠ è½½**: æ ¹æ®æ•°æ®åº“è¡¨åŠ¨æ€æ„å»ºæ–‡ä»¶æ ‘ç»“æ„

### ç¬¬åä¸ƒé˜¶æ®µï¼šé¡¹ç›®ç®¡ç†ç³»ç»Ÿå®Œå–„

#### 17.1 é¡¹ç›®åˆ é™¤åŠŸèƒ½
**éœ€æ±‚**: æ”¯æŒé¡¹ç›®åˆ é™¤ï¼ŒåŒ…æ‹¬å®Œæ•´çš„æ•°æ®æ¸…ç†ã€‚

```javascript
// é¡¹ç›®åˆ é™¤é€»è¾‘
async deleteProject(projectId) {
  // è·å–é¡¹ç›®ä¿¡æ¯
  const projectResult = await this.getProject(projectId)
  const project = projectResult.data
  const safeTableName = this.generateSafeTableName(project.name)
  
  // åˆ é™¤æ‰€æœ‰ç›¸å…³è¡¨
  const [allTables] = await pool.execute(`SHOW TABLES LIKE '${safeTableName}%'`)
  for (const tableRow of allTables) {
    const tableName = Object.values(tableRow)[0]
    await pool.execute(`DROP TABLE IF EXISTS \`${tableName}\``)
  }
  
  // åˆ é™¤é¡¹ç›®æˆå‘˜è®°å½•
  await pool.execute('DELETE FROM project_members WHERE project_id = ?', [projectId])
  
  // åˆ é™¤é¡¹ç›®è®°å½•
  await pool.execute('DELETE FROM projects WHERE id = ?', [projectId])
  
  return { success: true, message: 'é¡¹ç›®åˆ é™¤æˆåŠŸ' }
}
```

#### 17.2 æˆå‘˜ç»Ÿè®¡ä¼˜åŒ–
**é—®é¢˜**: é¡¹ç›®æˆå‘˜æ•°é‡ç»Ÿè®¡ä¸å‡†ç¡®ï¼Œå­˜åœ¨é‡å¤è®¡ç®—ã€‚

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨Setæ•°æ®ç»“æ„ç»Ÿè®¡å”¯ä¸€ç”¨æˆ·IDã€‚

```javascript
// ä»ªè¡¨ç›˜API - æˆå‘˜ç»Ÿè®¡ä¼˜åŒ–
const uniqueMembers = new Set()
for (const project of projects) {
  const projectResult = await projectService.getProject(project.id)
  if (projectResult.success && projectResult.data.memberDetails) {
    projectResult.data.memberDetails.forEach(member => {
      uniqueMembers.add(member.user_id)
    })
  }
}
const totalMembers = uniqueMembers.size
```

#### 17.3 é¡¹ç›®åˆ†ç±»æ˜¾ç¤º
- âœ… **ç±»å‹åˆ†ç»„**: æŒ‰é¡¹ç›®ç±»å‹åˆ†ç»„æ˜¾ç¤ºé¡¹ç›®åˆ—è¡¨
- âœ… **å›¾æ ‡æ ‡è¯†**: æ¯ç§ç±»å‹æœ‰å¯¹åº”çš„å›¾æ ‡å’Œé¢œè‰²
- âœ… **ç»Ÿè®¡ä¿¡æ¯**: æ˜¾ç¤ºæ¯ä¸ªç±»å‹çš„é¡¹ç›®æ•°é‡
- âœ… **ç©ºçŠ¶æ€å¤„ç†**: å¤„ç†æ²¡æœ‰é¡¹ç›®çš„ç±»å‹åˆ†ç»„

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡
1. **å®Œå–„æ–‡ä»¶æ“ä½œ**: æ–‡ä»¶é‡å‘½åã€ç§»åŠ¨ã€å¤åˆ¶
2. **å¢å¼º AI åŠŸèƒ½**: ä»£ç é‡æ„å»ºè®®ã€æ™ºèƒ½ä»£ç è¡¥å…¨
3. **ç”¨æˆ·æƒé™**: ç»†ç²’åº¦æƒé™æ§åˆ¶
4. **å®æ—¶åä½œ**: WebSocket å®æ—¶åŒæ­¥
5. **ä»£ç ç‰ˆæœ¬æ§åˆ¶**: æ–‡ä»¶ä¿®æ”¹å†å²è®°å½•

### é•¿æœŸç›®æ ‡
1. **ä»£ç ç‰ˆæœ¬æ§åˆ¶**: Git é›†æˆ
2. **æ’ä»¶ç³»ç»Ÿ**: æ‰©å±•åŠŸèƒ½æ”¯æŒ
3. **å¤šè¯­è¨€æ”¯æŒ**: å›½é™…åŒ–
4. **ç§»åŠ¨ç«¯é€‚é…**: PWA åº”ç”¨
5. **äº‘ç«¯éƒ¨ç½²**: Docker å®¹å™¨åŒ–éƒ¨ç½²

## ğŸ“ æ€»ç»“

AutoAI é¡¹ç›®ä»æœ€åˆçš„æœ¬åœ°æ–‡ä»¶ç›‘æ§å·¥å…·ï¼Œç»è¿‡å¤šæ¬¡æ¶æ„è°ƒæ•´ï¼Œæœ€ç»ˆå‘å±•æˆä¸ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„äº‘å¼€å‘å¹³å°ã€‚é¡¹ç›®å±•ç¤ºäº†ï¼š

1. **æŠ€æœ¯é€‰å‹çš„çµæ´»æ€§**: æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´æŠ€æœ¯æ–¹æ¡ˆ
2. **é—®é¢˜è§£å†³çš„èƒ½åŠ›**: é¢å¯¹æµè§ˆå™¨é™åˆ¶æ—¶çš„åˆ›æ–°è§£å†³æ–¹æ¡ˆ
3. **æ¶æ„è®¾è®¡çš„æˆç†Ÿåº¦**: ä»ç®€å•åˆ°å¤æ‚ï¼Œé€æ­¥å®Œå–„
4. **ç”¨æˆ·ä½“éªŒçš„é‡è§†**: å“åº”å¼è®¾è®¡ï¼Œç›´è§‚çš„æ“ä½œç•Œé¢

é¡¹ç›®æˆåŠŸå®ç°äº† AI è¾…åŠ©å¼€å‘çš„æ ¸å¿ƒç›®æ ‡ï¼Œä¸ºå›¢é˜Ÿåä½œå’Œä»£ç ç®¡ç†æä¾›äº†ç°ä»£åŒ–çš„è§£å†³æ–¹æ¡ˆã€‚
