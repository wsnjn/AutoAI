# AI迅速托管文档

## 项目概述

**项目名称**: AutoAi - 智能项目管理系统  
**项目类型**: 全栈Web应用  
**技术栈**: Vue.js 3 + Node.js + MySQL  
**开发状态**: 开发中，核心功能已实现  

## 项目简介

AutoAi是一个集成了AI功能的智能项目管理系统，支持项目创建、文件管理、团队协作和AI辅助开发。系统采用前后端分离架构，提供完整的用户认证、项目管理、文件操作和AI对话功能。

## 技术架构

### 前端技术栈
- **框架**: Vue.js 3 (Composition API)
- **构建工具**: Vite
- **路由**: Vue Router 4
- **UI组件**: 自定义组件
- **状态管理**: 本地存储 + 响应式数据
- **3D渲染**: Three.js
- **语音交互**: Web Speech API
- **样式**: 纯CSS（无第三方UI库）

### 后端技术栈
- **运行环境**: Node.js
- **Web框架**: Express.js
- **数据库**: MySQL 8.0
- **数据库驱动**: mysql2/promise
- **密码加密**: bcryptjs
- **AI集成**: DeepSeek API

### 数据库设计
- **用户表**: users (用户认证和管理)
- **项目表**: projects (项目基本信息)
- **项目成员表**: project_members (项目成员关系)
- **动态项目表**: 根据项目名称动态创建 (如: my_project)
- **动态文件夹表**: 根据文件夹路径动态创建 (如: my_project__src__java)
- **AI对话表**: ai_conversations (AI对话记录)
- **代码修改表**: code_modifications (代码修改历史)
- **项目日志表**: project_logs (项目操作日志)
- **用户聊天历史表**: chathistory (用户专属AI对话历史)

## 核心功能模块

### 1. 用户认证系统
- **登录/注册**: 支持用户名密码认证
- **密码加密**: 使用bcryptjs进行密码哈希
- **会话管理**: 基于localStorage的会话保持
- **路由守卫**: 自动重定向未登录用户

### 2. 项目管理
- **项目创建**: 支持项目名称、描述、类型设置
- **项目加入**: 通过项目ID加入现有项目
- **项目设置**: 成员数量限制、加入权限控制
- **项目切换**: 支持多项目间的快速切换

### 3. 文件管理系统
- **文件树显示**: 左侧树形结构展示项目文件
- **文件管理器**: 右侧文件列表和操作界面
- **文件夹创建**: 支持多级文件夹嵌套
- **文件上传**: 支持文件上传到指定文件夹
- **动态表管理**: 为每个文件夹创建独立的数据表

### 4. AI集成功能
- **AI对话**: 集成DeepSeek API进行智能对话
- **代码辅助**: AI协助代码生成和修改
- **对话历史**: 保存AI对话记录
- **代码修改记录**: 记录AI辅助的代码修改
- **用户专属记忆**: 每个用户独立的AI对话历史
- **长期记忆**: AI能够记住用户的完整对话历史

### 5. 3D模型与语音交互
- **Three.js集成**: 3D模型加载和显示
- **全局3D助手**: 右下角固定位置的3D机器人
- **语音识别**: 双击3D模型启动语音识别
- **语音合成**: AI回答自动语音朗读
- **预设对话**: 支持预设问答和快捷指令

### 6. 项目类型系统
- **项目分类**: 支持HTML、Vue、Android、小程序、React等5种类型
- **动态配置**: 每种类型有专属的AI提示词和技术栈
- **基础文件生成**: 创建项目时自动生成对应类型的基础文件
- **智能AI**: AI根据项目类型提供专业建议

### 7. 团队协作
- **成员管理**: 项目成员添加和管理
- **权限控制**: 不同角色的权限设置
- **成员统计**: 实时显示项目成员数量
- **项目删除**: 支持项目删除和数据清理

## 项目结构

```
AutoAi/
├── frontend/                 # 前端代码
│   ├── src/
│   │   ├── components/       # Vue组件
│   │   │   ├── FileTreeDisplay.vue    # 文件树显示
│   │   │   ├── SimpleFileManager.vue # 文件管理器
│   │   │   ├── FileTreeNode.vue      # 文件树节点
│   │   │   └── AIChatBox.vue         # AI聊天组件
│   │   ├── views/           # 页面视图
│   │   │   ├── HomePage.vue          # 主页
│   │   │   ├── FolderSelect.vue      # 项目创建/加入页
│   │   │   ├── MainApp.vue           # 主应用页面
│   │   │   └── AuthPage.vue         # 登录/注册页
│   │   ├── router/          # 路由配置
│   │   └── main.js          # 应用入口
│   └── package.json
├── backend/                  # 后端代码
│   ├── services/            # 业务逻辑服务
│   │   ├── projectService.js # 项目管理服务
│   │   ├── userService.js    # 用户管理服务
│   │   └── aiService.js      # AI集成服务
│   ├── config/              # 配置文件
│   │   └── database.js       # 数据库配置
│   ├── index.js             # 服务器入口
│   └── package.json
├── 项目开发文档.md           # 详细开发文档
├── 问题解决记录.md           # 问题解决历史
├── 项目启动指南.md           # 启动说明
└── AI迅速托管.md            # 本文档
```

## 关键特性

### 1. 动态数据库表管理
- **项目表**: 每个项目创建独立的数据表 (如: `my_project`)
- **文件夹表**: 每个文件夹创建独立的数据表 (如: `my_project__src__java`)
- **命名规则**: `项目名__文件夹路径` (用双下划线分隔)
- **自动管理**: 创建文件夹时自动创建对应的数据表

### 2. 智能文件存储
- **路径映射**: 文件根据父路径存储到对应的文件夹表
- **层级管理**: 支持无限层级的文件夹嵌套
- **数据一致性**: 确保文件存储在正确的数据表中

### 3. 响应式数据管理
- **Vue 3兼容**: 使用Vue 3的响应式API
- **实时更新**: 文件操作实时反映到界面
- **状态同步**: 前后端数据状态保持同步

## 已实现功能

### ✅ 用户认证
- 用户注册和登录
- 密码加密存储
- 会话管理
- 路由守卫

### ✅ 项目管理
- 项目创建和加入
- 项目信息管理
- 项目设置配置
- 成员管理

### ✅ 文件管理
- 文件树显示
- 文件夹创建
- 文件上传
- 动态表管理

### ✅ AI集成
- DeepSeek API集成
- AI对话功能
- 对话历史记录
- 代码修改记录
- 智能文件路径查找
- 项目结构分析
- 批量文件操作
- 文件删除功能完善

### ✅ 数据统计
- 项目统计信息
- 成员数量统计
- AI对话统计
- 文件数量统计

### ✅ 实时预览系统
- HTML文件实时预览
- 代码编辑器集成
- 双模式切换（预览/编辑）
- 实时保存功能
- 文件内容同步
- 响应式布局优化

## 当前状态

### 运行环境
- **前端**: http://localhost:5173
- **后端**: http://localhost:3000
- **数据库**: MySQL (本地)

### 默认用户
- **用户名**: wslop
- **密码**: 345345
- **角色**: admin

### 测试项目
- **项目ID**: BEJ2BT3L (或其他)
- **项目名**: my_project
- **类型**: web

## 常见问题

### 1. 启动问题
- 确保MySQL服务运行
- 检查端口3000和5173是否被占用
- 确保已安装所有依赖包

### 2. 数据库问题
- 检查数据库连接配置
- 确保表结构正确创建
- 验证JSON字段数据格式

### 3. AI功能问题
- 检查DeepSeek API配置
- 验证API密钥有效性
- 确保网络连接正常

### 4. 预览页面问题
- 检查预览API是否正常工作
- 验证文件内容是否正确加载
- 确保布局CSS设置正确

### 5. 文件更新问题
- 检查getFolderTables方法是否存在
- 验证数据库表结构是否正确
- 确保文件路径参数正确传递

## 开发注意事项

### 1. 数据库操作
- 使用参数化查询防止SQL注入
- 正确处理JSON字段的序列化/反序列化
- 注意字段类型匹配

### 2. 前端开发
- 使用Vue 3 Composition API
- 注意响应式数据的处理
- 正确处理异步操作

### 3. 错误处理
- 完善的错误捕获和提示
- 用户友好的错误信息
- 详细的日志记录

## 未来规划

### 短期目标
- 完善用户权限管理
- 优化文件上传功能
- 增强AI对话体验

### 长期目标
- 支持更多AI模型
- 添加代码版本控制
- 实现实时协作功能

## 联系信息

**开发者**: wslop  
**项目状态**: 积极开发中  
**最后更新**: 2025年9月15日  

---

*此文档旨在帮助新的AI快速了解项目结构和功能，减少重复解释的时间成本。*
